(new Promise(function(e){var f=document.readyState;"complete"===f||"loaded"===f||"interactive"===f?e():document.addEventListener("DOMContentLoaded",function(){return e()})})).then(function(){function e(a){this.m(a)}function f(){this.a=1;this.b=0;this.f=[];this.c=[]}function h(a){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";return new Promise(function(b,a){c.onload=function(){c.response?b(c.response):a(Error("XHR error"))};c.onerror=function(b){a(b)};c.send(null)})}function k(a,
c){if("fetch"in window&&"ReadableStream"in window)fetch(a).then(function(a){function b(){return d.read().then(function(a){if(a.done)return e.h;e.g(a.value).forEach(function(a){c(a)});return b()})}var d=a.body.getReader(),e=new f;return b()});else{var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";h(a).then(function(a){a=(new f).g(new Uint8Array(a));a.forEach(function(a){c(a)});return a})}}f.prototype={get h(){return this.f},g:function(a){this.c.push(a);for(var c=[],b=0;b<a.length;)if(1===
this.a){if(255!==a[b])throw Error("format error");this.a=2;++b}else if(2===this.a){if(216!==a[b])throw Error("format error");this.a=3;++b}else if(3===this.a){if(255!==a[b])throw Error("format error");this.a=4;++b}else if(4==this.a){var d=a[b];if(1===d||208<=d&&215>=d)this.a=3,++b;else if(218===d)this.a=8,++b;else if(2<=d&&254>=d)this.a=5,++b;else throw Error("format error");}else if(5===this.a)this.b=256*a[b],this.a=6,++b;else if(6===this.a){this.b=this.b+a[b]-2;if(!this.b)throw Error("format error");
this.a=7;++b}else if(7===this.a)this.b+b<a.length?(b=this.b+b,this.a=3):(this.b-=a.length-b,b=a.length);else if(8===this.a){for(;b<a.length&&255!==a[b];++b);b!==a.length&&(this.a=9,++b)}else if(9===this.a)if(217!==a[b])this.a=8,++b;else{this.a=1;++b;var e=[];this.c.forEach(function(a){return e.push(a)});e.pop();e.push(new Uint8Array(a.buffer,a.byteOffset,b));d=new Blob(e,{type:"image/jpeg"});this.f.push(d);c.push(d);a=new Uint8Array(a.buffer,a.byteOffset+b,a.length-b);b=0;this.c=[a]}return c}};e.prototype=
{m:function(a){this.c=a;this.h=this.c.getContext("2d");this.f=void 0;this.a=0;this.i=void 0;this.b=[]},j:function(a){this.b.push(new Promise(function(c){var b=new Image;b.onload=function(){window.URL.revokeObjectURL(b.src);c(b)};b.src=window.URL.createObjectURL(a)}));1===this.b.length&&this.l();this.g()},l:function(){this.c.addEventListener("mousemove",this.s.bind(this));window.addEventListener("deviceorientation",this.o.bind(this))},o:function(a){this.a=a.gamma;this.g()},s:function(a){void 0===this.f&&
(this.f=a.clientX);var c=a.clientX-this.f;this.f=a.clientX;this.a+=c/5;-30>this.a?this.a=-30:30<this.a&&(this.a=30);this.g()},g:function(){var a=this;if(this.b.length){var c=Math.floor((this.a+30)*this.b.length/60);0>c?c=0:c>=this.b.length&&(c=this.b.length-1);this.i!==c&&(this.i=c,this.b[c].then(function(b){a.c.width=b.width;a.c.height=b.height;a.h.clearRect(0,0,b.width,b.height);a.h.drawImage(b,0,0,b.width,b.height,0,0,b.width,b.height)}))}}};var g=[];[].forEach.call(document.getElementsByTagName("img"),
function(a){a.getAttribute("cycimg");null===a.getAttribute("cycimg")&&"cycimg"!==a.getAttribute("alt")||g.push(a)});g.forEach(function(a){var c=a.getAttribute("cycimg");null===c&&(c=a.src);var b=getComputedStyle(a,""),d=document.createElement("canvas");b&&(d.style=b);b=a.parentElement;b.insertBefore(d,a);b.removeChild(a);var f=new e(d);k(c,function(a){f.j(a)})})});
