(new Promise(function(e){var f=document.readyState;"complete"===f||"loaded"===f||"interactive"===f?e():document.addEventListener("DOMContentLoaded",function(){return e()})})).then(function(){function e(b){this.m(b)}function f(){this.a=1;this.b=0;this.f=[];this.c=[]}function h(b){var c=new XMLHttpRequest;c.open("GET",b,!0);c.responseType="arraybuffer";return new Promise(function(a,b){c.onload=function(){c.response?a(c.response):b(Error("XHR error"))};c.onerror=function(a){b(a)};c.send(null)})}function k(b,
c){if("fetch"in window&&"ReadableStream"in window)fetch(b).then(function(a){function b(){return d.read().then(function(a){if(a.done)return e.h;e.g(a.value).forEach(function(a){c(a)});return b()})}var d=a.body.getReader(),e=new f;return b()});else{var a=new XMLHttpRequest;a.open("GET",b,!0);a.responseType="arraybuffer";h(b).then(function(a){a=(new f).g(new Uint8Array(a));a.forEach(function(a){c(a)});return a})}}f.prototype={get h(){return this.f},g:function(b){this.c.push(b);for(var c=[],a=0;a<b.length;)if(1===
this.a){if(255!==b[a])throw Error("format error");this.a=2;++a}else if(2===this.a){if(216!==b[a])throw Error("format error");this.a=3;++a}else if(3===this.a){if(255!==b[a])throw Error("format error");this.a=4;++a}else if(4==this.a){var d=b[a];if(1===d||208<=d&&215>=d)this.a=3,++a;else if(218===d)this.a=8,++a;else if(2<=d&&254>=d)this.a=5,++a;else throw Error("format error");}else if(5===this.a)this.b=256*b[a],this.a=6,++a;else if(6===this.a){this.b=this.b+b[a]-2;if(!this.b)throw Error("format error");
this.a=7;++a}else if(7===this.a)this.b+a<b.length?(a=this.b+a,this.a=3):(this.b-=b.length-a,a=b.length);else if(8===this.a){for(;a<b.length&&255!==b[a];++a);a!==b.length&&(this.a=9,++a)}else if(9===this.a)if(217!==b[a])this.a=8,++a;else{this.a=1;++a;var e=[];this.c.forEach(function(a){return e.push(a)});e.pop();e.push(new Uint8Array(b.buffer,b.byteOffset,a));d=new Blob(e,{type:"image/jpeg"});this.f.push(d);c.push(d);b=new Uint8Array(b.buffer,b.byteOffset+a,b.length-a);a=0;this.c=[b]}return c}};e.prototype=
{m:function(b){this.c=b;this.h=this.c.getContext("2d");this.f=void 0;this.a=0;this.i=void 0;this.b=[]},j:function(b){this.b.push(new Promise(function(c){var a=new Image;a.onload=function(){window.URL.revokeObjectURL(a.src);c(a)};a.src=window.URL.createObjectURL(b)}));1===this.b.length&&this.l();this.g()},l:function(){this.c.addEventListener("mousemove",this.s.bind(this));window.addEventListener("deviceorientation",this.o.bind(this))},o:function(b){this.a=b.gamma;this.g()},s:function(b){void 0===this.f&&
(this.f=b.clientX);var c=b.clientX-this.f;this.f=b.clientX;this.a+=c/5;-30>this.a?this.a=-30:30<this.a&&(this.a=30);this.g()},g:function(){var b=this;if(this.b.length){var c=Math.floor((this.a+30)*this.b.length/60);0>c?c=0:c>=this.b.length&&(c=this.b.length-1);this.i!==c&&(this.i=c,this.b[c].then(function(a){b.c.width=a.width;b.c.height=a.height;b.h.clearRect(0,0,a.width,a.height);b.h.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height)}))}}};var g=[];[].forEach.call(document.getElementsByTagName("img"),
function(b){null!==b.getAttribute("cycimg")&&g.push(b)});g.forEach(function(b){var c=b.getAttribute("cycimg"),a=getComputedStyle(b,""),d=document.createElement("canvas");a&&(d.style=a);a=b.parentElement;a.insertBefore(d,b);a.removeChild(b);var f=new e(d);k(c,function(a){f.j(a)})})});
